<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login & Register</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    :root {
        --primary: #2e8b57;
        --secondary: #ffd700;
        --accent: #ff69b4;
        --mint: #eafff3;
        --peach: #f5bda8;
        --input-bg: #fff;
        --input-shadow: 2px 2px 0 #baffd9, 0 2px 8px #0001;
    }
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        background: #f7f9fb;
        font-family: 'Baloo 2', 'Comic Sans MS', cursive, sans-serif;
        box-sizing: border-box;
    }
    body {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .auth-main-container {
        display: flex;
        width: 100%;
        min-height: 100vh;
        box-sizing: border-box;
        background: white;
        border-radius: 16px;
        overflow: hidden;
        padding: 32px 0;
    }
    .auth-left {
        flex: 1.1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        padding: 0 0 0 5vw;
        min-width: 340px;
        margin-left: 100px;
    }
    .auth-hero-content {
        max-width: 480px;
        text-align: left;
    }
    .auth-hero-content h1 {
        font-size: 3rem;
        font-weight: 800;
        color: #111;
        margin-bottom: 18px;
        line-height: 1.1;
    }
    .auth-hero-content p {
        color: #444;
        font-size: 1.1rem;
        margin-bottom: 32px;
        max-width: 420px;
        letter-spacing: 0.02em;
    }
    .auth-hero-img {
        width: 340px;
        max-width: 90vw;
        height: auto;
        display: block;
        margin-top: 24px;
        animation: swing 3s ease-in-out infinite;
        transform-origin: 50% 0%;
    }
    @keyframes swing {
        0%   { transform: rotate(0deg);}
        20%  { transform: rotate(8deg);}
        50%  { transform: rotate(-8deg);}
        80%  { transform: rotate(8deg);}
        100% { transform: rotate(0deg);}
    }
    .auth-right {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        padding: 0 5vw 0 0;
        min-width: 340px;
        margin-right: 100px;
    }
    .container {
        background: rgba(255,255,255,0.98);
        border-radius: 18px;
        box-shadow: 0 8px 32px #2e8b5733, 0 2px 8px #ffd70055;
        padding: 32px 24px 24px 24px;
        width: 100%;
        max-width: 650px;
        min-width: 460px;
        position: relative;
        box-sizing: border-box;
        z-index: 2;
        border: 2px solid var(--primary);
        animation: popIn 0.7s;
        min-height: 200px;
        max-height: 90vh;
        overflow-y  : auto;
    }
    @keyframes popIn {
        0% { transform: scale(0.95) translateY(30px); opacity: 0;}
        100% { transform: scale(1) translateY(0); opacity: 1;}
    }
    .tabs {
        display: flex;
        margin-bottom: 14px;
        background: #eaf4ff;
        border-radius: 12px 12px 0 0;
        overflow: hidden;
        box-shadow: 0 2px 8px #ffd70033;
    }
    .tab-btn {
        flex: 1;
        padding: 8px 0;
        background: transparent;
        border: none;
        font-weight: bold;
        color: #3f4d34;
        cursor: pointer;
        transition: background 0.2s, color 0.2s;
        font-size: 1rem;
        letter-spacing: 1px;
    }
    .tab-btn.active {
        background: #2e8b57;
        color: #fff;
        box-shadow: 0 2px 8px #ffd70033;
    }
input[type="text"], input[type="password"], input[type="number"], input[type="email"], input[type="date"], select {
        width: 100%;
        padding: 9px 8px 9px 30px;
        border: 1.5px solid var(--peach);
        border-radius: 6px;
        font-size: 0.97rem;
        background: #eaf4ff;
        margin-bottom: 12px;
        box-sizing: border-box;
        transition: border 0.2s, box-shadow 0.2s;
        outline: none;
        color: #3f4d34;
        font-family: inherit;
    }
    input[type="text"]:focus, input[type="password"]:focus, input[type="number"]:focus, input[type="email"]:focus, input[type="date"]:focus {
        border: 2px solid var(--secondary);
        background: #f8fafc;
        box-shadow: 0 2px 8px #6a82fb22;
    }
    select {
        width: 100%;
        padding: 8px 10px 8px 32px;
        border: 1.5px solid #b5d8ff;
        border-radius: 6px;
        font-size: 0.97rem;
        background: #eaf4ff;
        box-sizing: border-box;
        transition: border 0.2s, box-shadow 0.2s;
        outline: none;
        color: #232946;
        font-family: inherit;
    }
    select:focus {
        border: 2px solid #6a82fb;
        background: #f8fafc;
        box-shadow: 0 2px 8px #6a82fb22;
    }
label {
    font-weight: 600;
    color: #3f4d34;
    margin-bottom: 4px;
    display: block;
    font-size: 1rem;
}
.form-group {
    margin-bottom: 8px;
    position: relative;
}
.input-icon {
    position: absolute;
    left: 10px;
    top: 38px;
    color: var(--primary);
    font-size: 1.1em;
    pointer-events: none;
}
.toggle-password {
    color: var(--accent);
    font-size: 1.1em;
}
.action-btn, button[type="submit"] {
    width: 100%;
    padding: 14px 0;
    background:  var(--primary);
    color: white;
    font-weight: 800;
    font-size: 1.2rem;
    border: none;
    border-radius: 10px;
    margin-top: 10px;
    margin-bottom: 10px;
    box-shadow: 2px 2px 0 #baffd9, 0 2px 8px #0001;
    cursor: pointer;
    transition: background 0.18s, color 0.18s, box-shadow 0.18s;
}
.action-btn:hover, button[type="submit"]:hover {
    background: var(--secondary);
    color: #3f4d34;
    box-shadow: 2px 2px 0 var(--primary), 0 4px 16px #0002;
}
.error {
    background: #ffeaea;
    color: #c0392b;
    border: 1px solid #ffb6b9;
    border-radius: 8px;
    padding: 10px 14px;
    margin-bottom: 12px;
    font-size: 1rem;
}
@media (max-width: 1100px) {
    .auth-main-container {
        flex-direction: column;
        align-items: center;
        padding: 0;
    }
    .auth-left, .auth-right {
        align-items: center;
        justify-content: center;
        padding: 0;
    }
    .auth-hero-content {
        text-align: center;
    }
}
@media (max-width: 700px) {
    .auth-main-container {
        flex-direction: column;
        padding: 0;
    }
    .auth-left, .auth-right {
        width: 100%;
        min-width: 0;
        padding: 0;
    }
    .container {
        max-width: 98vw;
        padding: 10px 2vw;
        max-height: 98vh;
    }
    .auth-hero-img {
        width: 220px;
    }
}
.form-section {
    display: none;
}
.form-row {
    display: flex;
    gap: 12px;
    width: 100%;
    margin-bottom: 0;
}
.form-row .form-group {
    flex: 1 1 0;
    min-width: 0;
    margin-bottom: 0;
}
@media (max-width: 900px) {
    .form-row {
        flex-direction: column;
        gap: 0;
    }
}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
    <div class="auth-main-container">
        <div class="auth-left">
            <div class="auth-hero-content">
                <h1>Kids Learn<br>Faster Visually</h1>
                <p>
                    Did you know that kids learn a significant amount more than kids who learn the traditional way?
                </p>
                <img src="../images/edutaktika.png" alt="Visual Learning" class="auth-hero-img" />
            </div>
        </div>
        <div class="auth-right">
            <div class="container">
                <div class="tabs">
                    <button class="tab-btn active" id="loginTab" onclick="showTab('login')">Login</button>
                    <button class="tab-btn" id="registerTab" onclick="showTab('register')">Register</button>
                </div>
                <!-- Login Form -->
                <div class="form-section" id="loginSection" style="display:block;">
                    <!-- <div class="error">Invalid email or password.</div> -->
                    <form id="loginForm" autocomplete="off">
                        <div class="form-group">
                            <span class="input-icon"><i class="fas fa-envelope"></i></span>
                            <label for="login_email">Email</label>
                            <input type="email" name="login_email" id="login_email" required>
                        </div>
                        <div class="form-group" style="position:relative;">
                            <span class="input-icon"><i class="fas fa-lock"></i></span>
                            <label for="login_password">Password</label>
                            <input type="password" name="login_password" id="login_password" required>
                            <span class="toggle-password" onclick="togglePassword('login_password', this)" style="position:absolute;right:12px;top:38px;cursor:pointer;">
                                <i class="fas fa-eye"></i>
                            </span>
                        </div>
                        <button type="submit" class="action-btn">Login</button>
                    </form>
                </div>
                <!-- Register Form -->
                <div class="form-section" id="registerSection">
                    <!-- <div class="error">All fields except Middle Name are required.</div> -->
                    <form id="registerForm" autocomplete="off" onsubmit="return checkPasswordMatchSubmit();">
                        <div class="form-inner">
                            <div class="form-group">
                                <span class="input-icon"><i class="fas fa-id-card"></i></span>
                                <label for="reg_id">ID Number</label>
                                <input type="text" name="reg_id" id="reg_id" required pattern="\d*" inputmode="numeric" maxlength="20" oninput="this.value=this.value.replace(/[^0-9]/g,'');">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-user"></i></span>
                                    <label for="reg_fname">First Name</label>
                                    <input type="text" name="reg_fname" id="reg_fname" required>
                                </div>
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-user"></i></span>
                                    <label for="reg_mname">M.I</label>
                                    <input type="text" name="reg_mname" id="reg_mname">
                                </div>
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-user"></i></span>
                                    <label for="reg_lname">Last Name</label>
                                    <input type="text" name="reg_lname" id="reg_lname" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fas fa-envelope"></i></span>
                                <label for="reg_email">Email</label>
                                <input type="email" name="reg_email" id="reg_email" required>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fas fa-map-marker-alt"></i></span>
                                <label for="reg_address">Address</label>
                                <input type="text" name="reg_address" id="reg_address" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-graduation-cap"></i></span>
                                    <label for="reg_grade">Grade Level</label>
                                    <select name="reg_grade" id="reg_grade" required>
                                        <option value="">Select Grade</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-book"></i></span>
                                    <label for="reg_subject">Subject</label>
                                    <select name="reg_subject" id="reg_subject" required>
                                        <option value="">Select Subject</option>
                                        <option value="Math">Math</option>
                                        <option value="Science">Science</option>
                                        <option value="English">English</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-users"></i></span>
                                    <label for="reg_section">Section</label>
                                    <select name="reg_section" id="reg_section" required>
                                        <option value="">Select Section</option>
                                        <option value="Apple">Apple</option>
                                        <option value="Banana">Banana</option>
                                        <option value="Cherry">Cherry</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-hourglass-half"></i></span>
                                    <label for="reg_age">Age</label>
                                    <input type="number" name="reg_age" id="reg_age" min="1" required>
                                </div>
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-venus-mars"></i></span>
                                    <label for="reg_gender">Gender</label>
                                    <select name="reg_gender" id="reg_gender" required style="padding-left:38px;">
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <span class="input-icon"><i class="fas fa-calendar"></i></span>
                                    <label for="reg_school_year">School Year</label>
                                    <select name="reg_school_year" id="reg_school_year" required>
                                        <option value="">Select School Year</option>
                                        <option value="2024-2025">2024-2025</option>
                                        <option value="2025-2026">2025-2026</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" style="position:relative;">
                                <span class="input-icon"><i class="fas fa-lock"></i></span>
                                <label for="reg_password">Password</label>
                                <input type="password" name="reg_password" id="reg_password" required>
                                <span class="toggle-password" onclick="togglePassword('reg_password', this)" style="position:absolute;right:12px;top:38px;cursor:pointer;">
                                    <i class="fas fa-eye"></i>
                                </span>
                            </div>
                            <div class="form-group" style="position:relative;">
                                <span class="input-icon"><i class="fas fa-lock"></i></span>
                                <label for="reg_confirm_password">Confirm Password</label>
                                <input type="password" name="reg_confirm_password" id="reg_confirm_password" required>
                                <span class="toggle-password" onclick="togglePassword('reg_confirm_password', this)" style="position:absolute;right:12px;top:38px;cursor:pointer;">
                                    <i class="fas fa-eye"></i>
                                </span>
                                <div id="password-match-message" style="margin-top:6px;font-size:0.95em;"></div>
                            </div>
                            <button type="submit" class="action-btn">Register</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase App (the core Firebase SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<!-- Firebase Authentication -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<!-- Firebase Realtime Database -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="../assets/js/Teacher Side/logreg.js"></script>
<script>
    const firebaseConfig = {
    apiKey: "AIzaSyB5BbeLLvPX8l1c4Lq0f-CmIUml4hQOQlE",
    authDomain: "edutaktika.firebaseapp.com",
    databaseURL: "https://edutaktika-default-rtdb.firebaseio.com",
    projectId: "edutaktika",
    storageBucket: "edutaktika.appspot.com",
    messagingSenderId: "676848575316",
    appId: "1:676848575316:web:f78f8c0f83bf3d9dfb5ec1",
    measurementId: "G-X3GT5TNN87"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const auth = firebase.auth();

    document.getElementById('registerForm').onsubmit = async function(e) {
        e.preventDefault();
        // Get form values
        const email = document.getElementById('reg_email').value;
        const password = document.getElementById('reg_password').value;
        const confirm = document.getElementById('reg_confirm_password').value;
        if (password !== confirm) {
            alert('Passwords do not match!');
            return;
        }
        // Collect other fields
        const userData = {
            id: document.getElementById('reg_id').value,
            fname: document.getElementById('reg_fname').value,
            mname: document.getElementById('reg_mname').value,
            lname: document.getElementById('reg_lname').value,
            address: document.getElementById('reg_address').value,
            gender: document.getElementById('reg_gender').value,
            age: document.getElementById('reg_age').value,
            gradelevel: document.getElementById('reg_grade').value,
            subject: document.getElementById('reg_subject').value,
            section: document.getElementById('reg_section').value,
            school_year: document.getElementById('reg_school_year').value,
            email: email
        };
        try {
            // Create user in Firebase Auth
            const userCredential = await auth.createUserWithEmailAndPassword(email, password);
            const uid = userCredential.user.uid;
            // Save user data in Realtime Database under "students"
            await db.ref('students/' + uid).set(userData);
            alert('Registration successful! You can now log in.');
            showTab('login');
            document.getElementById('registerForm').reset();
        } catch (error) {
            alert(error.message);
        }
    };

    document.getElementById('loginForm').onsubmit = async function(e) {
        e.preventDefault();
        const email = document.getElementById('login_email').value;
        const password = document.getElementById('login_password').value;
        try {
            await auth.signInWithEmailAndPassword(email, password);
            window.location.href = "homepage.html";
        } catch (error) {
            alert("Invalid email or password.");
        }
    };

    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            // Already logged in, redirect to homepage
            window.location.href = "homepage.html";
        }
    });
</script>

<script src="../assets/js/strongpassword.js"></script>

<script>
firebase.auth().onAuthStateChanged(async function(user) {
    if (user) {
        // Check if user is a student (exists in students DB)
        const uid = user.uid;
        const db = firebase.database();
        const snapshot = await db.ref('students/' + uid).once('value');
        const student = snapshot.val();
        if (student) {
            // Logged in and is a student, redirect to student homepage
            window.location.href = "homepage.html";
        } else {
            // Not a student, sign out and redirect to index
            await firebase.auth().signOut();
            window.location.href = "../index.html";
        }
    } else {
       
    }
});
</script>
</body>
</html>