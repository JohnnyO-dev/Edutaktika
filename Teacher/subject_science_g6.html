<!-- Grade 6 ONLY Science Subject Page (Teacher) -->
<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1.0'><title>Science (Grade 6 Teacher)</title><link rel='icon' type='image/png' href='../images/icons/chemistry.png'/><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'/><link rel='stylesheet' href='../CSS/header.css'><link rel='stylesheet' href='../CSS/subject.css'><link rel='stylesheet' href='../CSS/footer.css'><link rel='stylesheet' href='../CSS/dropdown.css'><style>.guard-msg{padding:40px 24px;text-align:center;font-family:sans-serif;}</style></head><body>
<div id='gradeGuard' class='guard-msg'>Checking access…</div>
<div id='mainContent' style='display:none;'>
<header><div class='floating-elements'><div class='floating-element'></div><div class='floating-element'></div><div class='floating-element'></div><div class='floating-element'></div></div><div class='header-content'><div class='logo'><div class='logo-icon'><i class='fas fa-graduation-cap'></i></div><div class='logo-text'><span>E</span><span>d</span><span>u</span><span>t</span><span>a</span><span>k</span><span>t</span><span>i</span><span>k</span><span>a</span></div></div><nav><ul><li><a href='homepage.html'>Home</a></li><li class='dropdown'><a href='#' class='dropbtn'>Subject <i class='fa fa-caret-down'></i></a><ul class='dropdown-content'><li><a href='subject_math_g6.html'>Math G6</a></li><li><a href='subject_english_g6.html'>English G6</a></li><li><a href='subject_science_g6.html' class='active'>Science G6</a></li></ul></li><li><a href='studentlist.html'>Student</a></li><li class='dropdown'><a href='#' class='dropbtn'>Leaderboard <i class='fa fa-caret-down'></i></a><ul class='dropdown-content'><li><a href='leaderboard_math.html'>Math</a></li><li><a href='leaderboard_english.html'>English</a></li><li><a href='leaderboard_science.html'>Science</a></li></ul></li><li><a href='#' id='profileBtn'><i class='fas fa-user-circle'></i> Profile</a></li></ul></nav></div></header>
<div id='profileSidebar' class='profile-sidebar'><div class='sidebar-content'><button class='close-btn' id='closeSidebar'>&times;</button><div style='position:relative;display:flex;flex-direction:column;align-items:center;'><img class='profile-avatar' id='profileAvatar' src='https://api.dicebear.com/7.x/bottts/svg?seed=user'><i class='fa-solid fa-star sidebar-star' style='position:absolute;bottom:0;right:10px;color:#ffd700;font-size:1.2rem;background:white;border-radius:50%;padding:2px 4px;box-shadow:0 1px 4px #ffd70044;'></i></div><div class='profile-name' id='profileName'>Loading...</div><br><div class='profile-info' style='width:100%;max-width:260px;margin-bottom:24px;'><div class='profile-role' style='color:#2e8b57;font-weight:700;font-size:1.1rem;margin-bottom:8px;letter-spacing:1px;text-align:center;'>Teacher (Grade 6)</div><div><strong>ID:</strong> <span id='profileId'>-</span></div><div><strong>First Name:</strong> <span id='profileFirstName'>-</span></div><div><strong>Middle Name:</strong> <span id='profileMiddleName'>-</span></div><div><strong>Last Name:</strong> <span id='profileLastName'>-</span></div><div><strong>Grade Level:</strong> <span id='profileGrade'>-</span></div><div><strong>Section:</strong> <span id='profileSection'>-</span></div></div><div class='logout-switch-row'><div class='logout-switch' id='logoutSwitch'><div class='logout-switch-circle'></div></div><span class='logout-label' id='logoutLabel'>LOGOUT</span></div></div></div>
<div class='container'>
<div style='display:flex;gap:18px;margin-bottom:24px;'><button id='createLessonBtn' style='background:#388e3c;color:#fff;border:none;border-radius:6px;padding:10px 28px;font-size:1.05rem;font-weight:600;cursor:pointer;'><i class='fa fa-plus'></i> Create Lesson</button><button id='createQuizBtn' style='background:#ffe600;color:#000;border:none;border-radius:6px;padding:10px 28px;font-size:1.05rem;font-weight:600;cursor:pointer;margin-left:auto;'><i class='fa fa-plus'></i> Create Quiz</button></div>
<div class='quarter-nav'><div class='quarter-tab active' data-quarter='1'>Quarter 1</div><div class='quarter-tab' data-quarter='2'>Quarter 2</div><div class='quarter-tab' data-quarter='3'>Quarter 3</div><div class='quarter-tab' data-quarter='4'>Quarter 4</div><div class='quarter-tab' data-quarter='5' style='margin-left:auto;'>Quizzes</div></div>
<div class='quarter-section active' id='quarter-1'><div class='quarter-title'><i class='fas fa-calendar-alt'></i><h2>Quarter 1</h2></div><div class='lessons-container'></div>
<div id='youtube-lessons' data-channel-id='UCjPqk3KZAKIdGShdVLx9fqQ' style='margin-top:20px;'>
<div class='quarter-title' style='align-items:center; gap:10px;'>
<i class='fab fa-youtube'></i><h3 style='margin:0;'>Video Lessons</h3>
</div>
<div class='lessons-container'><div>Loading YouTube lessons…</div></div>
</div>
</div>
<div class='quarter-section' id='quarter-2'><div class='quarter-title'><i class='fas fa-calendar-alt'></i><h2>Quarter 2</h2></div><div class='lessons-container'></div></div>
<div class='quarter-section' id='quarter-3'><div class='quarter-title'><i class='fas fa-calendar-alt'></i><h2>Quarter 3</h2></div><div class='lessons-container'></div></div>
<div class='quarter-section' id='quarter-4'><div class='quarter-title'><i class='fas fa-calendar-alt'></i><h2>Quarter 4</h2></div><div class='lessons-container'></div></div>
<div class='quarter-section' id='quarter-5'><div class='quarter-title'><i class='fas fa-calendar-alt'></i><h2>Quizzes</h2></div><div class='lessons-container'><div id='quiz-list'></div></div></div>
</div>
<footer><div class='footer-content'><div class='footer-column'><h3 class='edu'>Eduktaktika</h3><p>Grade 6 Teaching Portal.</p></div></div><div class='footer-bottom'><p>© 2025 Eduktaktika.</p></div></footer>
</div>
<script src='https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js'></script><script src='https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js'></script><script src='https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js'></script><script>
const cfg={apiKey:"AIzaSyB5BbeLLvPX8l1c4Lq0f-CmIUml4hQOQlE",authDomain:"edutaktika.firebaseapp.com",databaseURL:"https://edutaktika-default-rtdb.firebaseio.com",projectId:"edutaktika"}; if(!firebase.apps.length) firebase.initializeApp(cfg);
const db=firebase.database(); const auth=firebase.auth(); const subjectPage='subject_science';
function guardFail(msg){const g=document.getElementById('gradeGuard');g.style.display='block';g.innerHTML=`<h2 style='color:#c62828;'>Access Denied</h2><p>${msg}</p><p><a href='homepage.html'>Return</a></p>`;document.getElementById('mainContent').style.display='none';}
auth.onAuthStateChanged(async u=>{ if(!u){guardFail('Login required.'); return;} const snap=await db.ref('teachers/'+u.uid).once('value'); const t=snap.val(); if(!t||t.role!=='teacher'){guardFail('Teacher role required.'); return;} if((t.gradelevel||'').toString().trim()!=='6'){guardFail('Page restricted to Grade 6 teachers.'); return;} document.getElementById('gradeGuard').style.display='none'; document.getElementById('mainContent').style.display='block'; fillProfile(t,u.uid); loadOwnLessons(t); loadTeacherQuizzes('1'); });
function fillProfile(t,uid){document.getElementById('profileName').textContent=(t.fname||'')+' '+(t.lname||'');document.getElementById('profileId').textContent=t.id||uid;document.getElementById('profileFirstName').textContent=t.fname||'';document.getElementById('profileMiddleName').textContent=t.mname||'';document.getElementById('profileLastName').textContent=t.lname||'';document.getElementById('profileGrade').textContent=t.gradelevel||'';document.getElementById('profileSection').textContent=t.section||'';document.getElementById('profileAvatar').src='https://api.dicebear.com/7.x/bottts/svg?seed=' + encodeURIComponent(t.fname||'user');}
function viewPresentation(q,name,mode='view',subject=subjectPage){const p=`quarter=${encodeURIComponent(q)}&name=${encodeURIComponent(name)}&subject=${encodeURIComponent(subject)}`;window.location.href = (mode==='edit'?'Editor.html?':'present.html?')+p;}
async function loadOwnLessons(t){ const teacherUID=firebase.auth().currentUser.uid; const section=t.section; for(let q=1;q<=4;q++){ const cont=document.querySelector(`#quarter-${q} .lessons-container`); if(!cont) continue; cont.innerHTML=''; if(!section){ cont.innerHTML='<div>No section set.</div>'; continue;} const snap=await db.ref(`teachers/${teacherUID}/sections/${section}/lessons/${subjectPage}/quarter-${q}`).once('value'); if(!snap.exists()){ cont.innerHTML='<div>No lessons found.</div>'; continue;} const lessons=[]; snap.forEach(ch=>{const v=ch.val(); lessons.push({title:v.title||ch.key,description:v.description||''});}); lessons.sort((a,b)=>a.title.localeCompare(b.title)); cont.innerHTML=lessons.map(ls=>`<div class='lesson-item'><div class='lesson-thumbnail' style='background-color:var(--peach)'></div><div class='lesson-title'><h3>${ls.title}</h3><p>${ls.description}</p><button class='lesson-badge' onclick="viewPresentation('${q}','${ls.title}','view')">View</button><button class='lesson-badge' onclick="viewPresentation('${q}','${ls.title}','edit')">Edit</button></div></div>`).join(''); } }
// Quizzes
async function loadTeacherQuizzes(quarter){ const qList=document.getElementById('quiz-list'); if(!qList) return; qList.innerHTML='<div style="color:#888;">Loading...</div>'; const user=firebase.auth().currentUser; if(!user){ qList.innerHTML='<div>Login required.</div>'; return;} const tSnap=await db.ref('teachers/'+user.uid).once('value'); const t=tSnap.val(); if(!t||!t.section){ qList.innerHTML='<div>No section found.</div>'; return;} const snap=await db.ref(`teachers/${user.uid}/sections/${t.section}/quizzes/${subjectPage}/${quarter}`).once('value'); if(!snap.exists()){ qList.innerHTML='<div>No quizzes for this quarter.</div>'; return;} const arr=[]; snap.forEach(ch=>{const v=ch.val(); arr.push({title:v.title||ch.key,description:v.description||'',quarter:v.quarter||quarter,savedAt:v.savedAt||''});}); arr.sort((a,b)=> new Date(a.savedAt)-new Date(b.savedAt)); qList.innerHTML=`<div style='display:flex;flex-wrap:wrap;gap:18px;'>${arr.map(q=>`<div class='lesson-item'><div class='lesson-thumbnail' style='background-color:#ffdd01'></div><div class='lesson-title'><h3>${q.title}</h3><p>${q.description}</p><button class='lesson-badge' onclick="viewQuiz('${q.quarter}','${q.title}','view')">View</button><button class='lesson-badge' onclick="viewQuiz('${q.quarter}','${q.title}','edit')">Edit</button></div></div>`).join('')}</div>`; }
function viewQuiz(q,name,mode='view',subject=subjectPage){const p=`quarter=${encodeURIComponent(q)}&name=${encodeURIComponent(name)}&subject=${encodeURIComponent(subject)}`; window.location.href = (mode==='edit'?'quizEditor.html?':'quizView.html?')+p;}
// Create Lesson redirect
 document.getElementById('createLessonBtn').onclick=()=>{ const subject='subject_science'; const params=new URLSearchParams({subject}); const isLocal=location.hostname==='localhost'||location.hostname==='127.0.0.1'; const dev=`http://localhost:5173/?${params.toString()}`; const prod=`/Editor/dist/index.html?${params.toString()}`; window.location.href=isLocal?dev:prod; };
 document.getElementById('createQuizBtn').onclick=()=>{ document.getElementById('quizCreation').style.display='flex'; };

// YouTube RSS loader (Science G6)
async function loadYouTubeVideosTeacher(){ const wrapper=document.getElementById('youtube-lessons'); const container=wrapper?.querySelector('.lessons-container'); if(!wrapper||!container) return; const channelId=(wrapper.dataset.channelId||'').trim(); if(!channelId){ container.innerHTML='<div>Channel ID missing.</div>'; return;} const feedUrl=`https://www.youtube.com/feeds/videos.xml?channel_id=${encodeURIComponent(channelId)}`; async function fetchWithCors(url){ try{ const r=await fetch(url); if(r.ok) return await r.text(); throw 0; }catch(e){ try{ const rAO=await fetch('https://api.allorigins.win/raw?url='+encodeURIComponent(url)); if(rAO.ok) return await rAO.text(); throw 0; }catch(e2){ const rJ=await fetch('https://r.jina.ai/http/'+url.replace(/^https?:\/\//,'')); if(rJ.ok) return await rJ.text(); throw 0; } } } try{ const xml=await fetchWithCors(feedUrl); const doc=new DOMParser().parseFromString(xml,'text/xml'); const entries=[...doc.getElementsByTagName('entry')]; if(!entries.length){ container.innerHTML='<div>No recent videos.</div>'; return;} container.innerHTML=''; entries.slice(0,5).forEach(en=>{ const vid=en.getElementsByTagName('yt:videoId')[0]?.textContent||en.getElementsByTagName('videoId')[0]?.textContent||''; const title=en.getElementsByTagName('title')[0]?.textContent||'Video'; if(!vid) return; container.insertAdjacentHTML('beforeend',`<div class='lesson-item'><div class='video-embed' style='position:relative;width:100%;padding-top:56.25%;border-radius:8px;overflow:hidden;margin-bottom:12px;background:#000;'><iframe src='https://www.youtube.com/embed/${vid}' title='${title.replace(/"/g,'&quot;')}' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share' allowfullscreen style='position:absolute;top:0;left:0;width:100%;height:100%;border:0;' loading='lazy'></iframe></div><div class='lesson-title'><h3>${title}</h3><button class='lesson-badge' onclick=\"window.location.href='video.html?id=${vid}'\">Watch</button></div></div>`); }); if(!container.children.length) container.innerHTML='<div>No recent videos.</div>'; }catch(err){ console.error('YT load fail G6 Science teacher',err); const uploadsId=channelId.startsWith('UC')?('UU'+channelId.slice(2)):''; container.innerHTML= uploadsId?`<div style='position:relative;padding-top:56.25%;border-radius:8px;overflow:hidden;'><iframe src='https://www.youtube.com/embed/videoseries?list=${uploadsId}' style='position:absolute;top:0;left:0;width:100%;height:100%;border:0;' allowfullscreen></iframe></div>`:'<div>Failed to load videos.</div>'; } }
</script>
</body></html>